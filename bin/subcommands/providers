#!/usr/bin/env sh

# NAME
#  providers -
#
# SYNOPSIS
#  providers list
#  providers exist <provider>

# ╭───┤ Bootstrap
# ╰─

# Exit on first error
set -e

# log config
export LOG_NAMESPACE="$SH41_ICON sh41-provider"

# ╭───┤ Functions
# ╰─

list() {
  find "$PROVIDERS_HOME" -mindepth 1 -type f -exec basename {} \; \
    | sort
}

exists() {
  if [ ! -f "$PROVIDERS_HOME/$1" ]; then
    log error "provider \"$1\" does not exist"
    exit 1
  fi
}

# ╭───┤ Main 
# ╰─

PROVIDERS_HOME="$SH41_LIB/providers"

case "$1" in
  list) list ;; 
  exists) exists "$2" ;;
  *) log error "Unknown command $1"; exit 1 ;;
esac
